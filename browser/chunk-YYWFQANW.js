import{c as ie,d as re}from"./chunk-3BXDC2WT.js";import{a as J,c as K,g as Q,k as X,l as Y}from"./chunk-KKQCS774.js";import{a as ne}from"./chunk-HQZPPOAD.js";import{a as Z,b as ee,c as te,d as oe}from"./chunk-H5QP34LL.js";import{l as $}from"./chunk-GZYIXKYQ.js";import{a as se}from"./chunk-F4MG76PW.js";import{f as q,u as G,v as U}from"./chunk-IDKC7BFE.js";import{Ab as g,Db as A,Ib as d,Jb as w,Kb as P,Lb as R,Mb as B,Nb as N,Oa as M,Pb as C,Qb as T,Sa as n,T as I,Ta as p,Ub as W,Vb as z,Wb as H,Y as f,Za as F,ca as v,cb as L,fa as E,ib as h,kb as u,ma as x,na as _,ob as b,pb as j,qb as V,rb as D,sb as s,tb as a,ub as c,xb as O,zb as S}from"./chunk-JTW2HSPL.js";var ae=(()=>{let i=class i{transform(t,e){return t.filter(o=>o.title.toLowerCase().includes(e.toLowerCase()))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=E({name:"filter",type:i,pure:!0,standalone:!0});let r=i;return r})();function de(r,i){r&1&&c(0,"img",7)}function me(r,i){r&1&&c(0,"img",5)}function ue(r,i){r&1&&c(0,"img",6)}var le=(()=>{let i=class i{constructor(){this.customOptions={loop:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],responsive:{0:{items:1}},nav:!0,rtl:!0}}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-slider"]],standalone:!0,features:[C],decls:9,vars:1,consts:[[1,"container","w-10/12","mx-auto","my-10","flex"],[1,"w-3/4","main"],[3,"options"],["carouselSlide",""],[1,"w-1/4","child"],["src","./assets/images/slider-image-1.jpeg","alt","",1,"w-full"],["src","./assets/images/slider-image-3.jpeg","alt","",1,"w-full"],["src","./assets/images/main-slider-1.jpeg","alt","",1,"w-full"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"div",1)(2,"owl-carousel-o",2),h(3,de,1,0,"ng-template",3)(4,me,1,0,"ng-template",3)(5,ue,1,0,"ng-template",3),a()(),s(6,"div",4),c(7,"img",5)(8,"img",6),a()()),e&2&&(n(2),u("options",o.customOptions))},dependencies:[te,ee,Z],styles:[".main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:500px}.child[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px}"]});let r=i;return r})();var ce=(()=>{let i=class i{constructor(t,e,o){this._ProductService=t,this._CartService=e,this._WishlistService=o,this.productList=L([]),this.isLoding=!1,this.wishlistProductIds=[]}fetchProducts(t=""){return this._ProductService.getAllProducts().subscribe({next:e=>{this.productList.set(e.data)},error:e=>{console.error("Error fetching products: ",e)}})}addProductToCart(t){return this.isLoding=!0,this._CartService.AddProducttoCart(t).subscribe({next:e=>{this.isLoding=!1,this._CartService.cartItem.next(e.numOfCartItems)},error:e=>{this.isLoding=!1,console.error("Error adding product to cart: ",e)}})}fetchWishlist(){return this._WishlistService.GetLoggedUserWishlist().subscribe({next:t=>{this.wishlistProductIds=t.data.map(e=>e.id)},error:t=>{console.error("Error fetching wishlist: ",t)}})}toggleWishlist(t){this.isProductInWishlist(t)?this.removeFromWishlist(t):this.addToWishlist(t)}isProductInWishlist(t){return this.wishlistProductIds.includes(t)}addToWishlist(t){return this._WishlistService.AddProductToWishlist(t).subscribe({next:e=>{this.wishlistProductIds.push(t)},error:e=>{console.error("Error adding product to wishlist: ",e)}})}removeFromWishlist(t){return this._WishlistService.RemoveProductFromWishlist(t).subscribe({next:e=>{this.wishlistProductIds=this.wishlistProductIds.filter(o=>o!==t)},error:e=>{console.error("Error removing product from wishlist: ",e)}})}};i.\u0275fac=function(e){return new(e||i)(f(oe),f(se),f(ne))},i.\u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var he=r=>({color:r}),ge=r=>["/productdetails",r];function fe(r,i){r&1&&c(0,"app-slider")}function ve(r,i){r&1&&c(0,"i",18)}function xe(r,i){if(r&1){let l=O();s(0,"div",6)(1,"div",7),S("click",function(e){let o=x(l).$implicit,m=g();return _(m.toggleWishlist(o._id,e))}),s(2,"i",8),S("click",function(e){let o=x(l).$implicit,m=g();return _(m.toggleWishlist(o.id,e))}),a()(),s(3,"div",9),c(4,"div")(5,"img",10),s(6,"div",11)(7,"div")(8,"h5",12),d(9),a(),s(10,"h5",13),d(11),a()(),s(12,"div",14)(13,"span",15),d(14),a(),s(15,"i",16),d(16),a()()()(),s(17,"button",17),S("click",function(){let e=x(l).$implicit,o=g();return _(o.addProductToCart(e._id))}),h(18,ve,1,0,"i",18),d(19),W(20,"translate"),a()()}if(r&2){let l=i.$implicit,t=g();A("title",l.title),n(2),u("ngStyle",T(12,he,t.sharedService.isProductInWishlist(l.id)?"red":"gray")),n(),u("routerLink",T(14,ge,l._id)),n(2),u("src",l.imageCover,M),n(4),w(l.category.name),n(2),w(l.title.split(" ",4).join(" ")),n(3),P("",l.price," EGP"),n(2),w(l.ratingsAverage),n(2),b(18,t.sharedService.isLoding?18:-1),n(),P(" ",z(20,10,"Add product"),"")}}var Ae=(()=>{let i=class i{constructor(t,e,o,m){this.sharedService=t,this.router=e,this.renderer=o,this.toastr=m,this.searchTerm="",this.isHomePage=!1,this.debounceToggleWishlist=!1}ngOnInit(){localStorage.setItem("currentPage","/products"),this.sharedService.fetchProducts(this.searchTerm),this.sharedService.fetchWishlist(),this.isHomePage=this.router.url==="/home"}addProductToCart(t){this.sharedService.addProductToCart(t)}toggleWishlist(t,e){if(this.debounceToggleWishlist)return;this.debounceToggleWishlist=!0,setTimeout(()=>this.debounceToggleWishlist=!1,500),this.sharedService.toggleWishlist(t);let o=e.currentTarget;this.sharedService.isProductInWishlist(t)?(this.renderer.setStyle(o,"color","red"),this.toastr.error("Product remove to wishlist","Success")):(this.renderer.removeStyle(o,"color"),this.toastr.success("Product added from wishlist","Success"))}};i.\u0275fac=function(e){return new(e||i)(p(ce),p(G),p(F),p($))},i.\u0275cmp=v({type:i,selectors:[["app-products"]],standalone:!0,features:[C],decls:12,vars:5,consts:[[1,"max-w-md","mx-auto"],["for","default-search",1,"mb-2","text-sm","font-medium","text-gray-900","sr-only","dark:text-white"],[1,"relative"],["type","search","id","default-search","placeholder","Women ,Man , Electroinc...","required","",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-green-200","focus:border-green-200","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-200","dark:focus:border-green-200",3,"ngModelChange","ngModel"],["type","submit",1,"text-white","absolute","end-2.5","bottom-1.5","btn-main"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-4","container","w-10/12","mx-auto","my-10"],[1,"product","h-full","relative","group","w-full","max-w-sm","bg-white","border","border-gray-200","rounded-lg","shadow","dark:bg-gray-800","dark:border-gray-700","flex","flex-col",3,"title"],[1,"flex","items-center","mb-4","z-40",3,"click"],[1,"fa-regular","fa-heart","absolute","right-3","top-3","cursor-pointer","z-20","text-2xl",3,"click","ngStyle"],[1,"",3,"routerLink"],["alt","product image",1,"p-8","rounded-t-lg",3,"src"],[1,"px-5","pb-5","flex-grow"],[1,"text-main","text-xl","font-semibold","tracking-tight","text-gray-900","dark:text-white"],[1,"text-sm","m-3","font-semibold","tracking-tight","text-gray-900","dark:text-white"],[1,"flex","items-center","justify-between"],[1,"text-1xl","font-bold","text-gray-900","dark:text-white"],[1,"fa-solid","fa-star","rating-color"],[1,"btn-main","mt-auto","m-3",3,"click"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,o){e&1&&(h(0,fe,1,0,"app-slider"),s(1,"div",0)(2,"label",1),d(3,"Search"),a(),s(4,"div",2)(5,"input",3),N("ngModelChange",function(y){return B(o.searchTerm,y)||(o.searchTerm=y),y}),a(),s(6,"button",4),d(7,"Search"),a()()(),s(8,"div",5),V(9,xe,21,16,"div",6,j),W(11,"filter"),a()),e&2&&(b(0,o.isHomePage?-1:0),n(5),R("ngModel",o.searchTerm),n(4),D(H(11,2,o.sharedService.productList(),o.searchTerm)))},dependencies:[U,q,ae,Y,J,K,X,Q,re,ie,le]});let r=i;return r})();export{ce as a,Ae as b};
